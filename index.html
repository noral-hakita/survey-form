<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMAA - Merchant Survey</title>
    <link rel="icon" type="image/png" href="admaa.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }
        
        /* Removed overlay (Opacity 0) to show background.png fully */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0); 
            z-index: -1;
        }
        
        .header {
            /* Shiny red background with more pronounced gradient */
            background: linear-gradient(135deg, #ff3333 0%, #d32f2f 30%, #b71c1c 70%, #8b0000 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1), 
                        0 0 20px rgba(255, 50, 50, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.4);
            text-align: center;
            border: 3px solid #388e3c;
            position: relative;
            overflow: hidden;
        }
        
        /* Add subtle shine effect to header */
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                        transparent 0%, 
                        rgba(255, 255, 255, 0.6) 50%, 
                        transparent 100%);
            z-index: 2;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }
        
        .logo {
            /* Increased logo size */
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid #ffcc00;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.7);
            transition: transform 0.3s ease;
        }
        
        .logo:hover {
            transform: scale(1.05);
        }
        
        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: white;
            padding: 5px;
        }
        
        .header h1 {
            /* Slightly decreased heading size */
            font-size: 1.6rem;
            margin-bottom: 5px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
        }
        
        .header p {
            opacity: 0.95;
            font-size: 1rem;
            color: #ffcc00;
            font-weight: 500;
            position: relative;
            z-index: 2;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .category-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .category-card {
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            border: 2px solid #d32f2f;
            position: relative;
            overflow: hidden;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        /* Set overlay to 0 opacity */
        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0); 
            z-index: 1;
            transition: all 0.3s ease;
        }
        
        .category-card > * {
            position: relative;
            z-index: 2;
        }
        
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(211, 47, 47, 0.2);
            border-color: #388e3c;
        }
        
        .category-card.selected {
            border-color: #388e3c;
            border-width: 3px;
        }
        
        /* Set selected overlay to 0 opacity */
        .category-card.selected::before {
            background: rgba(241, 248, 233, 0); 
        }
        
        .category-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #d32f2f;
        }
        
        .category-name {
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }
        
        /* Box background set to transparent */
        .form-container {
            display: none;
            background: transparent;
            border-radius: 12px;
            padding: 0;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 3px solid #388e3c;
            position: relative;
        }
        
        .form-header {
            /* Shiny red background for form header too */
            background: linear-gradient(135deg, #ff3333 0%, #d32f2f 30%, #b71c1c 70%, #8b0000 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid #388e3c;
            position: relative;
            z-index: 3;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }
        
        .form-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                        transparent 0%, 
                        rgba(255, 255, 255, 0.6) 50%, 
                        transparent 100%);
            z-index: 2;
        }
        
        .form-header h2 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .back-button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: #ffcc00;
        }
        
        .form-content {
            padding: 30px;
            max-height: 70vh;
            overflow-y: auto;
            position: relative;
            z-index: 2;
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
        }

        /* Set overlay to 0 opacity */
        .form-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0); 
            z-index: -1;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #388e3c;
            border-radius: 10px;
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }
        
        /* Set overlay to 0 opacity */
        .form-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0); 
            border-radius: 8px;
            z-index: 1;
        }
        
        .form-section > * {
            position: relative;
            z-index: 2;
        }
        
        .section-title {
            color: #d32f2f;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid #388e3c;
            padding-bottom: 10px;
        }
        
        .section-title i {
            color: #388e3c;
        }
        
        .question-group {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #c8e6c9;
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        /* Set overlay to 0 opacity */
        .question-group::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0); 
            z-index: 1;
        }

        .question-group > * {
            position: relative;
            z-index: 2;
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 15px;
            color: #333;
            font-size: 1rem;
        }
        
        .rating-container {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .rating-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 8px 5px;
            border-radius: 8px;
            transition: all 0.2s;
            flex: 1;
            margin: 0 3px;
            border: 1px solid #ddd;
            background: rgba(255, 255, 255, 0); /* Transparent */
        }
        
        .rating-option:hover {
            background-color: #e8f5e9;
            border-color: #388e3c;
        }
        
        .rating-option.selected {
            background-color: #e8f5e9;
            border: 2px solid #388e3c;
            transform: scale(1.05);
        }
        
        .rating-circle {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            margin-bottom: 5px;
            border: 2px solid transparent;
        }
        
        .rating-option.selected .rating-circle {
            border-color: #d32f2f;
        }
        
        .rating-1 .rating-circle { background-color: #ff6b6b; color: white; border-color: #c62828; }
        .rating-2 .rating-circle { background-color: #ffa659; color: white; border-color: #ef6c00; }
        .rating-3 .rating-circle { background-color: #ffd166; color: #333; border-color: #f9a825; }
        .rating-4 .rating-circle { background-color: #9bd46d; color: white; border-color: #388e3c; }
        .rating-5 .rating-circle { background-color: #4caf50; color: white; border-color: #2e7d32; }
        
        .rating-label {
            font-size: 0.75rem;
            color: #666;
            text-align: center;
            margin-top: 3px;
        }
        
        .admaa-check {
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 2px solid #388e3c;
            border-left: 5px solid #d32f2f;
            position: relative;
            overflow: hidden;
        }
        
        /* Set overlay to 0 opacity */
        .admaa-check::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(241, 248, 233, 0); 
            border-radius: 8px;
            z-index: 1;
        }
        
        .admaa-check > * {
            position: relative;
            z-index: 2;
        }
        
        .check-question {
            font-weight: 600;
            margin-bottom: 15px;
            color: #d32f2f;
            font-size: 1.1rem;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #c8e6c9;
            flex: 1;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0); /* Transparent */
        }
        
        .radio-option:hover {
            background: #e8f5e9;
            border-color: #388e3c;
        }
        
        .radio-option input {
            margin-right: 8px;
            accent-color: #d32f2f;
             width: auto;
             box-shadow: none;
             border: none;
        }
        
        .cnic-field {
            display: none;
            margin-top: 20px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .cnic-field.show {
            display: block;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #d32f2f;
            position: relative;
            z-index: 2;
        }
        
        input[type="text"], select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #c8e6c9;
            border-radius: 8px;
            font-size: 1rem;
            background-color: rgba(255, 255, 255, 0); /* Transparent */
            transition: all 0.3s;
            position: relative;
            z-index: 2;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #d32f2f;
            box-shadow: 0 0 0 3px rgba(211, 47, 47, 0.1);
            background-color: #ffffff;
        }
        
        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #c8e6c9;
            position: relative;
            z-index: 2;
        }
        
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: 2px solid transparent;
        }
        
        .btn-primary {
            /* Shiny red button */
            background: linear-gradient(135deg, #ff3333 0%, #d32f2f 100%);
            color: white;
            border-color: #388e3c;
            box-shadow: 0 4px 8px rgba(211, 47, 47, 0.3);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(211, 47, 47, 0.4);
            border-color: #2e7d32;
        }
        
        .btn-secondary {
            background-color: #f1f8e9;
            color: #d32f2f;
            border: 2px solid #d32f2f;
        }
        
        .btn-secondary:hover {
            background-color: #e8f5e9;
            border-color: #388e3c;
        }
        
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #388e3c 0%, #2e7d32 100%);
            color: white;
            padding: 166px 24px;
            border-radius: 8px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s;
            border: 2px solid #d32f2f;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .score-display {
            font-size: 1.3rem;
            font-weight: bold;
            color: #d32f2f;
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            border: 2px solid #388e3c;
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            z-index: 2;
        }

        /* Set overlay to 0 opacity */
        .score-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(241, 248, 233, 0); 
            z-index: -1;
        }
        
        .required::after {
            content: " *";
            color: #d32f2f;
        }
        
        @media (max-width: 768px) {
            .category-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .logo-container {
                gap: 15px;
            }
            
            .logo {
                width: 80px;
                height: 80px;
            }
            
            .header h1 {
                font-size: 1.4rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .rating-container {
                flex-wrap: wrap;
            }
            
            .rating-option {
                flex: 0 0 calc(33.333% - 10px);
                margin-bottom: 10px;
            }
            
            .buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
            
            .radio-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-container">
            <div class="logo">
                <img src="admaa.png" alt="ADMAA Logo">
            </div>
            <div>
                 <!-- Increased logo size -->
                 <img src="admaalogo.png" alt="ADMAA Retail Enablement Services" style="height: 75px; filter: drop-shadow(0 0 5px rgba(255, 204, 0, 0.5));">
            </div>
        </div>
        <!-- Slightly decreased heading size -->
        <h1>Merchant Ranking Survey System</h1>
        <p>Complete the survey to rank merchants</p>
    </div>

    <div id="category-screen">
        <h2 style="color: #d32f2f; margin-bottom: 20px; text-align: center; border-bottom: 2px solid #388e3c; padding-bottom: 10px; position: relative; z-index: 2;">
            <i class="fas fa-filter"></i> Select Merchant Category
        </h2>
        <div class="category-container">
            <div class="category-card" data-category="grocery">
                <div class="category-icon">
                    <i class="fas fa-shopping-basket"></i>
                </div>
                <div class="category-name">Grocery & General Store</div>
            </div>
            
            <div class="category-card" data-category="pharmacy">
                <div class="category-icon">
                    <i class="fas fa-pills"></i>
                </div>
                <div class="category-name">Pharmacy & Medical</div>
            </div>
            
            <div class="category-card" data-category="electronics">
                <div class="category-icon">
                    <i class="fas fa-laptop"></i>
                </div>
                <div class="category-name">Electronics</div>
            </div>
            
            <div class="category-card" data-category="clothing">
                <div class="category-icon">
                    <i class="fas fa-tshirt"></i>
                </div>
                <div class="category-name">Clothing & Fashion</div>
            </div>
            
            <div class="category-card" data-category="restaurant">
                <div class="category-icon">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="category-name">Restaurant & Food</div>
            </div>
            
            <div class="category-card" data-category="hardware">
                <div class="category-icon">
                    <i class="fas fa-tools"></i>
                </div>
                <div class="category-name">Hardware & Construction</div>
            </div>
            
            <div class="category-card" data-category="other">
                <div class="category-icon">
                    <i class="fas fa-store"></i>
                </div>
                <div class="category-name">Other Categories</div>
            </div>
        </div>
    </div>

    <!-- Rest of the HTML remains the same -->
    <div class="form-container" id="survey-form">
        <div class="form-header">
            <h2>
                <i class="fas fa-clipboard-list"></i>
                <span id="form-category">Category Survey</span>
            </h2>
            <button class="back-button" id="back-to-category">
                <i class="fas fa-arrow-left"></i> Change Category
            </button>
        </div>
        
        <div class="form-content">
            <div class="admaa-check">
                <div class="check-question">
                    <i class="fas fa-qrcode"></i> Is this merchant registered with ADMAA QR System?
                </div>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="admaa-registered" value="yes" id="admaa-yes">
                        Yes, registered with ADMAA QR
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="admaa-registered" value="no" id="admaa-no">
                        No, not registered
                    </label>
                </div>
                
                <div class="cnic-field" id="cnic-field">
                    <label for="cnic" class="required">Merchant CNIC Number</label>
                    <input type="text" id="cnic" placeholder="Enter 13-digit CNIC (e.g., 42201-1234567-8)" 
                           pattern="\d{5}-\d{7}-\d{1}" title="Format: 42201-1234567-8">
                    <small style="color: #666; position: relative; z-index: 2;">Enter the registered CNIC for ADMAA QR verification</small>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="shop-name" class="required">Shop Name</label>
                    <input type="text" id="shop-name" placeholder="Enter shop name" required>
                </div>
                <div class="form-group">
                    <label for="location" class="required">Location/Area</label>
                    <input type="text" id="location" placeholder="Enter shop location" required>
                </div>
            </div>
            
            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-users"></i> Section 1: Customer & Sales Insights
                </h3>
                
                <div class="question-group">
                    <div class="question-text">1. What is the average number of customers per day?</div>
                    <div class="rating-container">
                        <div class="rating-option rating-1" data-question="q1" data-value="1">
                            <div class="rating-circle">1</div>
                            <div class="rating-label">Very Low (&lt;20)</div>
                        </div>
                        <div class="rating-option rating-2" data-question="q1" data-value="2">
                            <div class="rating-circle">2</div>
                            <div class="rating-label">Low (20-40)</div>
                        </div>
                        <div class="rating-option rating-3" data-question="q1" data-value="3">
                            <div class="rating-circle">3</div>
                            <div class="rating-label">Average (40-60)</div>
                        </div>
                        <div class="rating-option rating-4" data-question="q1" data-value="4">
                            <div class="rating-circle">4</div>
                            <div class="rating-label">High (60-80)</div>
                        </div>
                        <div class="rating-option rating-5" data-question="q1" data-value="5">
                            <div class="rating-circle">5</div>
                            <div class="rating-label">Very High (&gt;80)</div>
                        </div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">2. During difficult periods (e.g., shortages, strikes, weather), does the shop remain operational?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q2" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Never Open</div></div>
                        <div class="rating-option" data-question="q2" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Rarely Open</div></div>
                        <div class="rating-option" data-question="q2" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes Open</div></div>
                        <div class="rating-option" data-question="q2" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Usually Open</div></div>
                        <div class="rating-option" data-question="q2" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Always Open</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">3. What percentage of customers are regulars?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q3" data-value="1"><div class="rating-circle">1</div><div class="rating-label">&lt;20%</div></div>
                        <div class="rating-option" data-question="q3" data-value="2"><div class="rating-circle">2</div><div class="rating-label">20-40%</div></div>
                        <div class="rating-option" data-question="q3" data-value="3"><div class="rating-circle">3</div><div class="rating-label">40-60%</div></div>
                        <div class="rating-option" data-question="q3" data-value="4"><div class="rating-circle">4</div><div class="rating-label">60-80%</div></div>
                        <div class="rating-option" data-question="q3" data-value="5"><div class="rating-circle">5</div><div class="rating-label">&gt;80%</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">4. How often do customers ask for stuff that is not available?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q4" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Very Rarely</div></div>
                        <div class="rating-option" data-question="q4" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q4" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q4" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Often</div></div>
                        <div class="rating-option" data-question="q4" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Very Often</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">5. Do you accept returns or exchanges?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q5" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Never</div></div>
                        <div class="rating-option" data-question="q5" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q5" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q5" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Usually</div></div>
                        <div class="rating-option" data-question="q5" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Always</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">6. How would you rate your staff's behavior in handling customers?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q6" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Very Poor</div></div>
                        <div class="rating-option" data-question="q6" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Poor</div></div>
                        <div class="rating-option" data-question="q6" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Average</div></div>
                        <div class="rating-option" data-question="q6" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Good</div></div>
                        <div class="rating-option" data-question="q6" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Excellent</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">7. Has the merchant faced repeated customer conflicts?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q7" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Very Often</div></div>
                        <div class="rating-option" data-question="q7" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Often</div></div>
                        <div class="rating-option" data-question="q7" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q7" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q7" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Never</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">8. Do customers leave dissatisfied or frustrated?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q8" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Very Often</div></div>
                        <div class="rating-option" data-question="q8" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Often</div></div>
                        <div class="rating-option" data-question="q8" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q8" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q8" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Never</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">9. Are disputes common during payments or returns?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q9" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Very Common</div></div>
                        <div class="rating-option" data-question="q9" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Common</div></div>
                        <div class="rating-option" data-question="q9" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q9" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Rare</div></div>
                        <div class="rating-option" data-question="q9" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Very Rare</div></div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-boxes"></i> Section 2: Inventory & Operations
                </h3>
                
                <div class="question-group">
                    <div class="question-text">10. How frequently is your inventory updated?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q10" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q10" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Monthly</div></div>
                        <div class="rating-option" data-question="q10" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Bi-Weekly</div></div>
                        <div class="rating-option" data-question="q10" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Weekly</div></div>
                        <div class="rating-option" data-question="q10" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Daily</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">11. How do you manage your shop inventory? (mobile application or write in a copy)</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q11" data-value="1"><div class="rating-circle">1</div><div class="rating-label">No System</div></div>
                        <div class="rating-option" data-question="q11" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Memory Only</div></div>
                        <div class="rating-option" data-question="q11" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Manual Copy</div></div>
                        <div class="rating-option" data-question="q11" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Basic Software</div></div>
                        <div class="rating-option" data-question="q11" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Advanced App</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">12. Are you consistently open and close at your advertised times?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q12" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Never On Time</div></div>
                        <div class="rating-option" data-question="q12" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Rarely On Time</div></div>
                        <div class="rating-option" data-question="q12" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes On Time</div></div>
                        <div class="rating-option" data-question="q12" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Usually On Time</div></div>
                        <div class="rating-option" data-question="q12" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Always On Time</div></div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-credit-card"></i> Section 3: Payments & Digital Adoption
                </h3>
                
                <div class="question-group">
                    <div class="question-text">13. What is the percentage breakdown of digital payments vs. cash?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q13" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Mostly Cash (&gt;80%)</div></div>
                        <div class="rating-option" data-question="q13" data-value="2"><div class="rating-circle">2</div><div class="rating-label">70% Cash</div></div>
                        <div class="rating-option" data-question="q13" data-value="3"><div class="rating-circle">3</div><div class="rating-label">50/50</div></div>
                        <div class="rating-option" data-question="q13" data-value="4"><div class="rating-circle">4</div><div class="rating-label">70% Digital</div></div>
                        <div class="rating-option" data-question="q13" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Mostly Digital (&gt;80%)</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">14. How often is ADMAA QR specifically used for payments?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q14" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Never</div></div>
                        <div class="rating-option" data-question="q14" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q14" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q14" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Often</div></div>
                        <div class="rating-option" data-question="q14" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Very Often</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">15. Do you make a record of the sale (note it down)?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q15" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Never</div></div>
                        <div class="rating-option" data-question="q15" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q15" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q15" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Usually</div></div>
                        <div class="rating-option" data-question="q15" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Always</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">16. Do you follow official branding/QR display guidelines?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q16" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Not At All</div></div>
                        <div class="rating-option" data-question="q16" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Poorly</div></div>
                        <div class="rating-option" data-question="q16" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Somewhat</div></div>
                        <div class="rating-option" data-question="q16" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Well</div></div>
                        <div class="rating-option" data-question="q16" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Perfectly</div></div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-shield-alt"></i> Section 4: Compliance & Safety
                </h3>
                
                <div class="question-group">
                    <div class="question-text">17. Have your shop ever been in an accident? (Robbery, for example, if yes, how well did you handle it?)</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q17" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Poor Handling</div></div>
                        <div class="rating-option" data-question="q17" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Below Average</div></div>
                        <div class="rating-option" data-question="q17" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Average Response</div></div>
                        <div class="rating-option" data-question="q17" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Well Handled</div></div>
                        <div class="rating-option" data-question="q17" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Excellent Response</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">18. Have you ever been penalized or sealed by authorities?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q18" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Multiple Times</div></div>
                        <div class="rating-option" data-question="q18" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Several Times</div></div>
                        <div class="rating-option" data-question="q18" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Once or Twice</div></div>
                        <div class="rating-option" data-question="q18" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q18" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Never</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">19. When a mistake occurs, is it resolved immediately?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q19" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Never Resolved</div></div>
                        <div class="rating-option" data-question="q19" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Delayed</div></div>
                        <div class="rating-option" data-question="q19" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q19" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Usually</div></div>
                        <div class="rating-option" data-question="q19" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Always Immediately</div></div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-trophy"></i> Section 5: Reputation & Competition
                </h3>
                
                <div class="question-group">
                    <div class="question-text">20. Do you monitor your Google reviews if your shop is on google or local reputation?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q20" data-value="1"><div class="rating-circle">1</div><div class="rating-label">Never</div></div>
                        <div class="rating-option" data-question="q20" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Rarely</div></div>
                        <div class="rating-option" data-question="q20" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Sometimes</div></div>
                        <div class="rating-option" data-question="q20" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Often</div></div>
                        <div class="rating-option" data-question="q20" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Actively Monitor</div></div>
                    </div>
                </div>
                
                <div class="question-group">
                    <div class="question-text">21. In your immediate area, how do you track or analyze what your top 2-3 local competitors are doing?</div>
                    <div class="rating-container">
                        <div class="rating-option" data-question="q21" data-value="1"><div class="rating-circle">1</div><div class="rating-label">No Tracking</div></div>
                        <div class="rating-option" data-question="q21" data-value="2"><div class="rating-circle">2</div><div class="rating-label">Basic Awareness</div></div>
                        <div class="rating-option" data-question="q21" data-value="3"><div class="rating-circle">3</div><div class="rating-label">Occasional Check</div></div>
                        <div class="rating-option" data-question="q21" data-value="4"><div class="rating-circle">4</div><div class="rating-label">Regular Monitoring</div></div>
                        <div class="rating-option" data-question="q21" data-value="5"><div class="rating-circle">5</div><div class="rating-label">Detailed Analysis</div></div>
                    </div>
                </div>
            </div>
            
            <div class="score-display" id="total-score">
                <span style="position: relative; z-index: 2;">Total Score: <span id="score-value">0</span>/105</span>
            </div>
            
            <div class="buttons">
                <button class="btn btn-secondary" id="reset-btn">
                    <i class="fas fa-redo"></i> Reset Survey
                </button>
                <button class="btn btn-primary" id="submit-btn">
                    <i class="fas fa-paper-plane"></i> Submit Survey
                </button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Survey submitted successfully!</span>
    </div>

    <script>
        let selectedCategory = '';
        let surveyData = {};
        
        const questionIds = [];
        for (let i = 1; i <= 21; i++) {
            questionIds.push(`q${i}`);
            surveyData[`q${i}`] = 0;
        }
        
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.category-card').forEach(c => {
                    c.classList.remove('selected');
                });
                
                this.classList.add('selected');
                selectedCategory = this.getAttribute('data-category');
                
                const categoryName = this.querySelector('.category-name').textContent;
                document.getElementById('form-category').textContent = categoryName;
                
                document.getElementById('category-screen').style.display = 'none';
                document.getElementById('survey-form').style.display = 'block';
                
                resetForm();
            });
        });
        
        document.getElementById('back-to-category').addEventListener('click', function() {
            document.getElementById('category-screen').style.display = 'block';
            document.getElementById('survey-form').style.display = 'none';
            selectedCategory = '';
        });
        
        document.querySelectorAll('input[name="admaa-registered"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const cnicField = document.getElementById('cnic-field');
                if (this.value === 'yes') {
                    cnicField.classList.add('show');
                    document.getElementById('cnic').required = true;
                } else {
                    cnicField.classList.remove('show');
                    document.getElementById('cnic').required = false;
                    document.getElementById('cnic').value = '';
                }
            });
        });
        
        document.querySelectorAll('.rating-option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.getAttribute('data-question');
                const value = parseInt(this.getAttribute('data-value'));
                
                surveyData[question] = value;
                
                const questionGroup = this.closest('.question-group');
                questionGroup.querySelectorAll('.rating-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                this.classList.add('selected');
                
                updateScore();
            });
        });
        
        function updateScore() {
            let totalScore = 0;
            questionIds.forEach(q => {
                totalScore += surveyData[q] || 0;
            });
            
            document.getElementById('score-value').textContent = totalScore;
            document.getElementById('total-score').style.display = totalScore > 0 ? 'block' : 'none';
        }
        
        function resetForm() {
            questionIds.forEach(q => {
                surveyData[q] = 0;
            });
            
            document.querySelectorAll('.rating-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            document.getElementById('survey-form').querySelectorAll('input[type="text"], textarea').forEach(field => {
                field.value = '';
            });
            
            document.querySelectorAll('input[name="admaa-registered"]').forEach(radio => {
                radio.checked = false;
            });
            
            document.getElementById('cnic-field').classList.remove('show');
            document.getElementById('cnic').required = false;
            
            updateScore();
        }
        
        document.getElementById('reset-btn').addEventListener('click', resetForm);
        
        document.getElementById('submit-btn').addEventListener('click', function() {
            if (!selectedCategory) {
                showToast('Please select a category first', 'error');
                return;
            }
            
            const admaaRegistered = document.querySelector('input[name="admaa-registered"]:checked');
            if (!admaaRegistered) {
                showToast('Please select ADMAA QR registration status', 'error');
                return;
            }
            
            if (admaaRegistered.value === 'yes') {
                const cnic = document.getElementById('cnic').value;
                if (!cnic || !/^\d{5}-\d{7}-\d{1}$/.test(cnic)) {
                    showToast('Please enter a valid 13-digit CNIC number', 'error');
                    return;
                }
            }
            
            const shopName = document.getElementById('shop-name').value;
            if (!shopName) {
                showToast('Please enter shop name', 'error');
                return;
            }
            
            const location = document.getElementById('location').value;
            if (!location) {
                showToast('Please enter shop location', 'error');
                return;
            }
            
            let answeredCount = 0;
            questionIds.forEach(q => {
                if (surveyData[q] > 0) answeredCount++;
            });
            
            if (answeredCount < 5) {
                showToast('Please answer at least 5 questions', 'error');
                return;
            }
            
            const submissionData = {
                category: selectedCategory,
                admaaRegistered: admaaRegistered.value,
                cnic: admaaRegistered.value === 'yes' ? document.getElementById('cnic').value : 'N/A',
                shopName: shopName,
                location: location,
                timestamp: new Date().toISOString(),
                ...surveyData
            };
            
            let totalScore = 0;
            questionIds.forEach(q => {
                totalScore += surveyData[q] || 0;
            });
            submissionData.totalScore = totalScore;
            
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
            this.disabled = true;
            
            const webhookUrl = 'https://noral.gleeze.com/webhook/survey';
            
            fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(submissionData)
            })
            .then(response => {
                if (response.ok) {
                    showToast('Survey submitted successfully!', 'success');
                    
                    setTimeout(() => {
                        document.getElementById('category-screen').style.display = 'block';
                        document.getElementById('survey-form').style.display = 'none';
                        resetForm();
                        selectedCategory = '';
                        
                        this.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Survey';
                        this.disabled = false;
                    }, 2000);
                } else {
                    throw new Error('Submission failed');
                }
            })
            .catch(error => {
                showToast('Error submitting survey. Please try again.', 'error');
                this.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Survey';
                this.disabled = false;
                console.error('Error:', error);
            });
        });
        
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            const icon = toast.querySelector('i');
            
            toastMessage.textContent = message;
            
            if (type === 'error') {
                toast.style.background = 'linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%)';
                icon.className = 'fas fa-exclamation-circle';
            } else if (type === 'info') {
                toast.style.background = 'linear-gradient(135deg, #1976d2 0%, #0d47a1 100%)';
                icon.className = 'fas fa-info-circle';
            } else {
                toast.style.background = 'linear-gradient(135deg, #388e3c 0%, #2e7d32 100%)';
                icon.className = 'fas fa-check-circle';
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 4000);
        }
        
        updateScore();
    </script>
</body>
</html>